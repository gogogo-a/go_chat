# KamaChat

ã€ä»£ç éšæƒ³å½•çŸ¥è¯†æ˜Ÿçƒã€‘é¡¹ç›®åˆ†äº«-åŸºäºgo+vueå®ç°çš„èŠå¤©å®¤+ä»¿å¾®ä¿¡é¡¹ç›®

---

## ğŸ“‘ ç›®å½•å¯¼èˆª

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å®‰è£…ä¸è¿è¡Œ](#å®‰è£…ä¸è¿è¡Œ)
- [é¡¹ç›®ç»“æ„è¯¦è§£](#é¡¹ç›®ç»“æ„è¯¦è§£)
  - [åç«¯é¡¹ç›®ç»“æ„](#åç«¯é¡¹ç›®ç»“æ„)
  - [å‰ç«¯é¡¹ç›®ç»“æ„](#å‰ç«¯é¡¹ç›®ç»“æ„)
- [æ ¸å¿ƒæŠ€æœ¯æ¶æ„](#æ ¸å¿ƒæŠ€æœ¯æ¶æ„)
  - [åç«¯æ¶æ„è®¾è®¡](#åç«¯æ¶æ„è®¾è®¡)
  - [å‰ç«¯æ¶æ„è®¾è®¡](#å‰ç«¯æ¶æ„è®¾è®¡)
- [é¡¹ç›®å­¦ä¹ è·¯çº¿](#é¡¹ç›®å­¦ä¹ è·¯çº¿)
  - [é€‚åˆäººç¾¤](#é€‚åˆäººç¾¤)
  - [å­¦ä¹ é¡ºåº](#å­¦ä¹ é¡ºåº)
  - [å­¦ä¹ å»ºè®®](#å­¦ä¹ å»ºè®®)

---

# é¡¹ç›®æ¦‚è¿°

## ç®€ä»‹
KamaChat æ˜¯ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„å³æ—¶é€šè®¯é¡¹ç›®ï¼Œå…·å¤‡åå°ç®¡ç†ã€å•èŠç¾¤èŠã€è”ç³»äººç®¡ç†ã€å¤šç§æ¶ˆæ¯ï¼ˆæ–‡æœ¬ / æ–‡ä»¶ / è§†é¢‘ï¼‰å¤„ç†ã€ç¦»çº¿æ¶ˆæ¯å¤„ç†ä»¥åŠéŸ³è§†é¢‘é€šè¯ç­‰åŠŸèƒ½ï¼Œæ—¨åœ¨æ‰“é€ ç±»ä¼¼å¾®ä¿¡çš„èŠå¤©ä½“éªŒã€‚

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **ç¼–ç¨‹è¯­è¨€**ï¼šGo 1.20+
- **Web æ¡†æ¶**ï¼šGinï¼ˆHTTP è·¯ç”±ã€ä¸­é—´ä»¶ï¼‰
- **ORM æ¡†æ¶**ï¼šGORMï¼ˆMySQL æ•°æ®åº“æ“ä½œï¼‰
- **æ•°æ®åº“**ï¼šMySQL 8.0+
- **ç¼“å­˜**ï¼šRedis 6.0+ï¼ˆGoRedis å®¢æˆ·ç«¯ï¼‰
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šKafkaï¼ˆå¯é€‰ï¼Œæ”¯æŒ channel å’Œ kafka ä¸¤ç§æ¨¡å¼ï¼‰
- **å®æ—¶é€šä¿¡**ï¼šWebSocketï¼ˆGorilla WebSocketï¼‰
- **æ—¥å¿—åº“**ï¼šZapï¼ˆé«˜æ€§èƒ½ç»“æ„åŒ–æ—¥å¿—ï¼‰
- **åŠ å¯†**ï¼šAESï¼ˆå¯†ç åŠ å¯†ï¼‰ã€SSL/TLSï¼ˆHTTPSï¼‰
- **çŸ­ä¿¡æœåŠ¡**ï¼šé˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**ï¼šVue3ï¼ˆç»„åˆå¼ APIï¼‰
- **è·¯ç”±**ï¼šVue Router 4
- **çŠ¶æ€ç®¡ç†**ï¼šVuex 4
- **UI ç»„ä»¶**ï¼šElement Plus
- **å®æ—¶é€šä¿¡**ï¼šWebSocket
- **éŸ³è§†é¢‘**ï¼šWebRTC
- **æ„å»ºå·¥å…·**ï¼šWebpack / Vue CLI
- **åŒ…ç®¡ç†**ï¼šYarn / npm

## æ ¸å¿ƒäº®ç‚¹
1. âœ… **åˆ†å±‚æ¶æ„æ¸…æ™°**ï¼šMVC æ¨¡å¼ï¼ŒèŒè´£åˆ†æ˜ï¼Œæ˜“äºç»´æŠ¤
2. âœ… **WebSocket é•¿è¿æ¥**ï¼šå®æ—¶æ¶ˆæ¯æ¨é€ï¼Œç”¨æˆ·ä½“éªŒä½³
3. âœ… **ç¦»çº¿æ¶ˆæ¯å¤„ç†**ï¼šæ¶ˆæ¯æŒä¹…åŒ–ï¼Œä¸Šçº¿è‡ªåŠ¨æ‹‰å–
4. âœ… **Redis ç¼“å­˜ä¼˜åŒ–**ï¼šå‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼Œæå‡æ€§èƒ½
5. âœ… **Kafka æ¶ˆæ¯é˜Ÿåˆ—**ï¼šæ”¯æŒé«˜å¹¶å‘åœºæ™¯ï¼ˆå¯é€‰ï¼‰
6. âœ… **WebRTC éŸ³è§†é¢‘**ï¼šP2P é€šè¯ï¼Œæ”¯æŒ TURN ä¸­ç»§
7. âœ… **åå°ç®¡ç†ç³»ç»Ÿ**ï¼šç”¨æˆ·/ç¾¤ç»„ç®¡ç†ã€æƒé™æ§åˆ¶
8. âœ… **å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿ**ï¼šæ³¨å†Œã€ç™»å½•ã€çŸ­ä¿¡éªŒè¯


# åŠŸèƒ½ç‰¹æ€§
1. å³æ—¶é€šè®¯åŠŸèƒ½
   + å•èŠä¸ç¾¤èŠï¼šæ”¯æŒä¸€å¯¹ä¸€ç§å¯†èŠå¤©å’Œç¾¤ç»„èŠå¤©ï¼Œæ¶ˆæ¯å®æ—¶æ¨é€ã€‚
   + è”ç³»äººç®¡ç†ï¼šå¯æ·»åŠ ã€åˆ é™¤ã€æ‹‰é»‘è”ç³»äººï¼Œå¤„ç†å¥½å‹ç”³è¯·ç­‰ã€‚
   + æ¶ˆæ¯ç±»å‹ï¼šæ”¯æŒæ–‡æœ¬ã€æ–‡ä»¶ã€éŸ³è§†é¢‘ç­‰å¤šç§ç±»å‹æ¶ˆæ¯çš„å‘é€ä¸æ¥æ”¶ã€‚
   + ç¦»çº¿æ¶ˆæ¯å¤„ç†ï¼šç¡®ä¿ç”¨æˆ·ç¦»çº¿æ—¶æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œä¸Šçº¿åå¯æ­£å¸¸æ¥æ”¶ã€‚
2. éŸ³è§†é¢‘é€šè¯ï¼šåŸºäº WebRTC å®ç° 1 å¯¹ 1 éŸ³è§†é¢‘é€šè¯ï¼ŒåŒ…æ‹¬å‘èµ·ã€æ‹’ç»ã€æ¥æ”¶ã€æŒ‚æ–­é€šè¯ç­‰åŠŸèƒ½ã€‚
3. åå°ç®¡ç†ï¼šå…·å¤‡åå°ç®¡ç†ç•Œé¢ï¼Œé“å·ç”¨æˆ·å¯è¿›è¡Œäººå‘˜ç®¡æ§ç­‰ç»´æŠ¤æ“ä½œã€‚
4. å®‰å…¨ä¸éªŒè¯ï¼šç™»å½•æ³¨å†Œé‡‡ç”¨ SMS çŸ­ä¿¡éªŒè¯æ–¹å¼ï¼Œå¹¶æ”¯æŒ SSL åŠ å¯†ï¼Œä¿éšœç”¨æˆ·ä¿¡æ¯å®‰å…¨ã€‚
5. åå°mysqlæ•°æ®åº“ï¼šä½¿ç”¨ GORM è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œç¡®ä¿æ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚
6. æ—¥å¿—è®°å½•ï¼šä½¿ç”¨ Zap æ—¥å¿—åº“è®°å½•ç³»ç»Ÿè¿è¡Œæ—¥å¿—ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ä¸æ€§èƒ½ç›‘æ§ã€‚
7. æ¶ˆæ¯é˜Ÿåˆ—ï¼šä½¿ç”¨ Kafka å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç¡®ä¿æ¶ˆæ¯çš„é«˜æ•ˆä¼ è¾“ä¸å¤„ç†ã€‚
8. redisç¼“å­˜ï¼šä½¿ç”¨ GoRedis è¿›è¡Œç¼“å­˜æ“ä½œï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚
9. WebSocketï¼šä½¿ç”¨ WebSocket å®ç°å®æ—¶æ¶ˆæ¯æ¨é€ï¼Œä¿è¯æ¶ˆæ¯çš„å®æ—¶æ€§ã€‚

# å¿«é€Ÿå¼€å§‹ï¼ˆæœ¬åœ°å¼€å‘ï¼‰

## ç¯å¢ƒè¦æ±‚
- Go 1.20+
- Node.js 16+
- MySQL 8.0+
- Redis 6.0+

## æœ¬åœ°è¿è¡Œæ­¥éª¤

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd KamaChat
```

### 2. é…ç½®åç«¯

#### 2.1 å®‰è£…ä¾èµ–
```bash
go mod tidy
```

#### 2.2 é…ç½®æ–‡ä»¶
```bash
cp configs/config.toml configs/config_local.toml
```

ä¿®æ”¹ `configs/config_local.toml`ï¼š
```toml
[mainConfig]
appName = "KamaChat"
host = "0.0.0.0"
port = 8000

[mysqlConfig]
host = "127.0.0.1"
port = 3306
user = "root"
password = "your_password"
databaseName = "kama_chat_server"

[redisConfig]
host = "127.0.0.1"
port = 6379
password = ""
db = 0

[kafkaConfig]
messageMode = "channel"  # æœ¬åœ°å¼€å‘ä½¿ç”¨ channel æ¨¡å¼
hostPort = "127.0.0.1:9092"

[logConfig]
logPath = "./cmd/kama_chat_server/logs"

[staticSrcConfig]
staticAvatarPath = "./static/avatars"
staticFilePath = "./static/files"
```

#### 2.3 åˆ›å»ºæ•°æ®åº“
```bash
mysql -u root -p
CREATE DATABASE kama_chat_server CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EXIT;
```

#### 2.4 å¯åŠ¨ Redis
```bash
redis-server
```

#### 2.5 è¿è¡Œåç«¯
```bash
cd cmd/kama_chat_server
go run main.go
```

åç«¯å°†åœ¨ `https://127.0.0.1:8000` å¯åŠ¨ï¼ˆéœ€é…ç½® SSL è¯ä¹¦ï¼‰ã€‚

---

### 3. é…ç½®å‰ç«¯

#### 3.1 å®‰è£…ä¾èµ–
```bash
cd web/chat-server
yarn install
# æˆ–
npm install
```

#### 3.2 ä¿®æ”¹åç«¯ API åœ°å€
ç¼–è¾‘ `web/chat-server/vue.config.js`ï¼Œç¡®ä¿ä»£ç†é…ç½®æ­£ç¡®ï¼š
```javascript
module.exports = {
  devServer: {
    proxy: {
      '/api': {
        target: 'https://127.0.0.1:8000',
        changeOrigin: true,
        secure: false
      }
    }
  }
}
```

#### 3.3 è¿è¡Œå‰ç«¯
```bash
yarn serve
# æˆ–
npm run serve
```

å‰ç«¯å°†åœ¨ `http://localhost:8080` å¯åŠ¨ã€‚

---

### 4. æµ‹è¯•é¡¹ç›®

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8080`
2. æ³¨å†Œä¸¤ä¸ªæµ‹è¯•è´¦å·
3. ä½¿ç”¨ä¸¤ä¸ªæµè§ˆå™¨çª—å£ç™»å½•ä¸åŒè´¦å·
4. äº’ç›¸æ·»åŠ å¥½å‹
5. å‘é€æ¶ˆæ¯æµ‹è¯•

---

## å¸¸è§é—®é¢˜

### Q1: SSL è¯ä¹¦é—®é¢˜
**é—®é¢˜ï¼š** åç«¯å¯åŠ¨æŠ¥é”™ "can't find certificate"

**è§£å†³ï¼š** æœ¬åœ°å¼€å‘å¯ä»¥ä½¿ç”¨ mkcert ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
```bash
# å®‰è£… mkcert
brew install mkcert  # macOS
# æˆ–åœ¨ Windows ä¸‹è½½ mkcert.exe

# ç”Ÿæˆè¯ä¹¦
mkcert -install
mkcert 127.0.0.1 localhost

# å°†ç”Ÿæˆçš„è¯ä¹¦æ”¾åˆ° pkg/ssl/ ç›®å½•
```

æˆ–è€…ä¿®æ”¹ `cmd/kama_chat_server/main.go` ä½¿ç”¨ HTTPï¼š
```go
// æ”¹ä¸º
if err := https_server.GE.Run(fmt.Sprintf("%s:%d", host, port)); err != nil {
    zlog.Fatal("server running fault")
}
```

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥
æ£€æŸ¥ MySQL æ˜¯å¦å¯åŠ¨ï¼š
```bash
# macOS/Linux
sudo service mysql status

# Windows
net start mysql
```

### Q3: Redis è¿æ¥å¤±è´¥
æ£€æŸ¥ Redis æ˜¯å¦å¯åŠ¨ï¼š
```bash
redis-cli ping
# è¿”å› PONG è¡¨ç¤ºæ­£å¸¸
```

### Q4: å‰ç«¯è¯·æ±‚è·¨åŸŸ
ç¡®ä¿åç«¯å·²å¼€å¯ CORSï¼ˆä»£ç ä¸­å·²é…ç½®ï¼‰ã€‚

---

# å®‰è£…ä¸è¿è¡Œï¼ˆäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼‰
æ­¤æ¬¡å®‰è£…è¿è¡Œä¸ºä¸€é”®éƒ¨ç½²ï¼Œå³å¯åœ¨Ubuntu22.04çš„äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸Šçº¿ï¼Œå…¬ç½‘éƒ½å¯ä»¥è®¿é—®ã€‚
åœ¨æ‰§è¡Œè„šæœ¬ä»£ç ä¹‹å‰ï¼Œéœ€è¦åšä¸€äº›å‰ç½®å‡†å¤‡ã€‚
![](docs/image/3.png)
![](docs/image/4.png)
æŠŠç«¯å£3306ï¼ˆmysqlï¼‰, 6379ï¼ˆredisï¼‰, 443ï¼ˆå‰ç«¯è®¿é—®ï¼‰, 80ï¼ˆäº‘æœåŠ¡å™¨httpè®¿é—®ï¼‰, 22ï¼ˆsshï¼‰, 3478ï¼ˆturnæœåŠ¡å™¨ï¼Œç”¨äºéŸ³è§†é¢‘å…¬ç½‘è½¬å‘ï¼‰, 8000ï¼ˆåç«¯è®¿é—®ï¼‰ç­‰ç«¯å£å¼€æ”¾ã€‚
![](docs/image/5.png)
æ‰“å¼€å‰ç«¯src/views/chat/contact/ContactChat.vueï¼Œæ‰¾åˆ°ICE_CFGé…ç½®ï¼Œæ›´æ–°å¯¹åº”çš„turnæœåŠ¡å™¨çš„ç›¸å…³é…ç½®ã€‚turnæœåŠ¡å™¨å°±æ˜¯ä½ çš„äº‘æœåŠ¡å™¨ã€‚
å¦‚æœéœ€è¦æœ¬åœ°é€šä¿¡çš„è¯ï¼Œå°±éœ€è¦æŠŠiceServersåˆ æ‰ï¼Œè®©ICE_CFGç½®ç©ºã€‚
```toml
[mainConfig]
appName = "your app name"
host = "0.0.0.0"
port = 8000

[mysqlConfig]
host = "127.0.0.1"
port = 3306
user = "root"
password = "123456"
databaseName = "your database name"

[redisConfig]
host = "127.0.0.1"
port = 6379
password = ""
db = 0

[authCodeConfig]
accessKeyID = "your accessKeyID in alibaba cloud"
accessKeySecret = "your accessKeySecret in alibaba cloud"
signName = "é˜¿é‡Œäº‘çŸ­ä¿¡æµ‹è¯•"
templateCode = "SMS_154950909"

[logConfig]
logPath = "your log path"

[kafkaConfig]
messageMode = "channel"# æ¶ˆæ¯æ¨¡å¼ channel or kafka
hostPort = "127.0.0.1:9092" # "127.0.0.1:9092,127.0.0.1:9093,127.0.0.1:9094" å¤šä¸ªkafkaæœåŠ¡å™¨
loginTopic = "login"
chatTopic = "chat_message"
logoutTopic = "logout"
partition = 0 # kafka partition
timeout = 1 # å•ä½ç§’

[staticSrcConfig]
staticAvatarPath = "./static/avatars"
staticFilePath = "./static/files"
```

ä½ éœ€è¦ä¿®æ”¹ç›¸åº”çš„åç«¯é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚è¿˜éœ€è¦å…ˆå®Œæˆæ‰‹æœºéªŒè¯çš„åŠŸèƒ½ï¼Œè¿™ç¯‡éœ€è¦çœ‹â€œåç«¯å¼€å‘â€é‡Œçš„â€œæ‰‹æœºéªŒè¯â€åŠŸèƒ½ã€‚

åœ¨è¿™äº›éƒ½å®Œæˆä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹æ‰§è¡Œè„šæœ¬ä»£ç äº†ã€‚

```bash
#!/bin/bash

# æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…
sudo apt update && sudo apt upgrade -y

# å®‰è£… MySQL
echo "Installing MySQL..."
sudo apt install mysql-server -y

# é…ç½® MySQL å®‰å…¨
sudo mysql_secure_installation

# å¯åŠ¨å¹¶å¯ç”¨ MySQL æœåŠ¡
sudo systemctl start mysql
sudo systemctl enable mysql

# è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
echo "Creating database 'kama_chat_server'..."
sudo mysql -u root -p <<EOF
CREATE DATABASE kama_chat_server;
EOF

# å®‰è£… Redis
echo "Installing Redis..."
sudo apt install redis-server -y

# é…ç½® Redis
# sudo nano /etc/redis/redis.conf  # ä¿®æ”¹ bind 127.0.0.1 æ”¹ä¸º bind 0.0.0.0ï¼ˆå¦‚æœéœ€è¦å¤–éƒ¨è®¿é—®ï¼‰

# å¯åŠ¨å¹¶å¯ç”¨ Redis æœåŠ¡
sudo systemctl restart redis
sudo systemctl enable redis

# å¸è½½æ—§ç‰ˆæœ¬ Node.js å’Œ npmï¼Œå¦‚æœä¸æ˜¯çº¯å‡€ç‰ˆçš„Ubuntuçš„è¯
echo "Uninstalling previous versions of Node.js and npm..."
sudo apt remove --purge -y nodejs npm

# # å®‰è£… Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ˆnvmï¼‰
echo "Installing Node Version Manager (nvm)..."
rm -rf ~/.nvm
export NVM_NODE_MIRROR=https://npmmirror.com/mirrors/node/
export NVM_NPM_MIRROR=https://npmmirror.com/mirrors/npm/
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash



# è®¾ç½® NVM_DIR ç¯å¢ƒå˜é‡ï¼ˆé¿å…é‡å¤å†™å…¥ ~/.bashrcï¼‰
if ! grep -q "export NVM_DIR=~/.nvm" ~/.bashrc; then
    echo 'export NVM_DIR="$HOME/.nvm"' >> ~/.bashrc
    echo '[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm' >> ~/.bashrc
    echo '[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion' >> ~/.bashrc
fi


# æ‰‹åŠ¨è®¾ç½® NVM_DIR å¹¶åŠ è½½ nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # åŠ è½½ nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # åŠ è½½ bash_completion

source ~/.bashrc

# æ£€æŸ¥ nvm æ˜¯å¦å­˜åœ¨
if ! command -v nvm &> /dev/null; then
    echo "nvm could not be found. Please ensure it is installed and added to your PATH."
    exit 1
fi

# å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Node.jsï¼ˆä¾‹å¦‚ v16.xï¼‰
echo "Installing Node.js v16.x..."
nvm install 16
nvm use 16


# åŠ è½½ç¯å¢ƒå˜é‡
source ~/.bashrc

# å®‰è£… Go
echo "Installing Go..."
wget https://mirrors.aliyun.com/golang/go1.20.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.20.linux-amd64.tar.gz

cp -r /usr/local/go/bin/* /usr/bin
# è®¾ç½® Go ç¯å¢ƒå˜é‡
echo "Configuring Go environment..."

export PATH=$PATH:/usr/local/go/bin

 # è®¾ç½® Go ç¯å¢ƒå˜é‡ï¼ˆé¿å…é‡å¤å†™å…¥ ~/.bashrcï¼‰
 if ! grep -q "export GOPATH=$HOME/go" ~/.bashrc; then
     echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
 fi
 source ~/.bashrc


# # é…ç½® Go ä»£ç†
echo "Configuring Go proxy..."
go env -w GOPROXY=https://goproxy.cn,direct

# å®‰è£… Vue.js å¼€å‘ç¯å¢ƒ
echo "Installing Vue.js development environment..."
sudo apt install npm -y



# æ–¹æ¡ˆ1ï¼šä½¿ç”¨ npm å®‰è£… Yarn
# sudo npm install -g yarn

# æ–¹æ¡ˆ2ï¼šä½¿ç”¨cnpm å®‰è£… Yarn
sudo npm install -g cnpm --registry=https://registry.npmjs.org
sudo cnpm install -g yarn

# å®‰è£… Vue CLI
sudo cnpm install -g @vue/cli

# é‡æ–°å®‰è£…é¡¹ç›®ä¾èµ–
cd ~/project/KamaChat/web/chat-server

yarn cache clean
rm -rf node_modules

yarn install # ä¼šæŠŠpackage.jsonä¸­æ‰€æœ‰ä¾èµ–é…ç½®å¥½çš„

#æ‰“åŒ…é¡¹ç›®æˆdistï¼Œæ”¾åˆ°/var/www/html/ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡äº‘æœåŠ¡å™¨çš„å…¬ç½‘ipçœ‹åˆ°å‰ç«¯é¡µé¢äº†
rm -rf /var/www/html/* 
rm -rf /root/project/KamaChat/web/chat-server/dist
yarn build
sudo cp -r /root/project/KamaChat/web/chat-server/dist/* /var/www/html # æ”¹æˆè‡ªå·±çš„é¡¹ç›®è·¯å¾„
sudo chmod -R 755 /var/www/html
sudo chown -R www-data:www-data /var/www/html

cd ~/project/KamaChat

# å®‰è£… ssl æ¨¡å—
echo "Installing ssl..."
sudo apt-get install openssl
sudo apt-get install libssl-dev

# # åˆ›å»ºæ ¹å¯†é’¥ï¼Œç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)ï¼Œåˆ›å»ºæ ¹è¯ä¹¦
openssl genrsa -out /etc/ssl/private/root.key 2048
openssl req -new -key /etc/ssl/private/root.key -out /etc/ssl/certs/root.csr
openssl x509 -req -in /etc/ssl/certs/root.csr -out /etc/ssl/certs/root.crt -signkey /etc/ssl/private/root.key -CAcreateserial -days 3650

# ç”ŸæˆæœåŠ¡å™¨å¯†é’¥ï¼Œç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚ (CSR)ï¼Œåˆ›å»ºæœåŠ¡å™¨è¯ä¹¦æ‰©å±•æ–‡ä»¶
openssl genrsa -out /etc/ssl/private/server.key 2048
openssl req -new -key /etc/ssl/private/server.key -out /etc/ssl/certs/server.csr
sudo nano v3.ext
# å†…å®¹å¦‚ä¸‹
# authorityKeyIdentifier=keyid,issuer
# basicConstraints=CA:FALSE
# keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
# subjectAltName = @alt_names
# [alt_names]
# IP.1 = xxxxxxxxx # ä½ çš„äº‘æœåŠ¡å™¨åœ°å€

# # ä½¿ç”¨æ ¹è¯ä¹¦ä¸ºæœåŠ¡å™¨è¯ä¹¦ç­¾å
openssl x509 -req -in /etc/ssl/certs/server.csr -CA /etc/ssl/certs/root.crt -CAkey /etc/ssl/private/root.key -CAcreateserial -out /etc/ssl/certs/server.crt -days 500 -sha256 -extfile v3.ext


# æ‰“å¼€Apache2é…ç½®æ–‡ä»¶
sudo nano /etc/apache2/sites-enabled/000-default.conf
# æ·»åŠ å¦‚ä¸‹å†…å®¹
# <VirtualHost *:443>
#     ServerAdmin webmaster@localhost
#     DocumentRoot /var/www/html

#     SSLEngine on
#     SSLProxyEngine on

#     # æ›¿æ¢ä¸ºæ‚¨çš„è‡ªç­¾åè¯ä¹¦è·¯å¾„
#     SSLCertificateFile /etc/ssl/certs/server.crt
#     SSLCertificateKeyFile /etc/ssl/private/server.key

#     # å¦‚æœæœ‰ä¸­é—´è¯ä¹¦ï¼Œæ·»åŠ ä»¥ä¸‹è¡Œ
#     # SSLCertificateChainFile /path/to/your_intermediate.crt

#     ErrorLog ${APACHE_LOG_DIR}/error.log
#     CustomLog ${APACHE_LOG_DIR}/access.log combined

#     # ä»¥ä¸‹é…ç½®å¯é€‰ï¼Œç”¨äºå¯ç”¨ HTTP åˆ° HTTPS é‡å®šå‘ï¼Œä¹Ÿå¯ä»¥æŠŠè¿™æ®µæ·»åŠ åˆ°80ç«¯å£é‚£å„¿
#     <IfModule mod_rewrite.c>
#         RewriteEngine On
#         RewriteCond %{HTTPS} off
#         RewriteRule ^/?(.*) https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]
#     </IfModule>
# </VirtualHost>

# å¯ç”¨sslæ¨¡å—ï¼Œå¯ç”¨sslç«™ç‚¹ï¼Œé‡å¯æœåŠ¡
sudo a2enmod ssl
sudo a2ensite 000-default.conf
sudo systemctl restart apache2


# é…ç½®turnæœåŠ¡å™¨
echo "Installing coturn..."
sudo apt install coturn
sudo nano /etc/coturn/coturn.conf
# é…ç½®ä»¥ä¸‹å‚æ•°
# listening-ip=0.0.0.0

# external-ip=xxxxx # å¤–éƒ¨ IP åœ°å€ï¼ˆæ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨å…¬ç½‘ IPï¼‰

# listening-port=3478 # ç›‘å¬ç«¯å£

# user=username:password # ç”¨æˆ·åå’Œå¯†ç ï¼ˆæ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·åå’Œå¯†ç ï¼‰

# tls-certificate=/etc/ssl/certs/server.crt # SSL è¯ä¹¦è·¯å¾„ï¼ˆå¦‚æœéœ€è¦åŠ å¯†é€šä¿¡ï¼‰
# tls-private-key=/etc/ssl/private/server.key

sudo systemctl start coturn
sudo systemctl enable coturn


# å°†åç«¯æ‰“åŒ…éƒ¨ç½²
cd ~/project/KamaChat/cmd/kama_chat_server # é‡Œé¢æ˜¯main.go
go build -o kama_chat_backend main.go
sudo cp kama_chat_backend /usr/local/bin/

sudo nano /etc/systemd/system/kama_chat_backend.service
# é…ç½®ä»¥ä¸‹å†…å®¹
# [Unit]
# Description=kama chat service
# After=network.target

# [Service]
# User=kama_chat  # æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·å
# Group=kama_chat  # æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·å
# WorkingDirectory=/root/project/KamaChat/cmd/kama_chat_server  # æ›¿æ¢ä¸ºä½ çš„é¡¹ç›®è·¯å¾„
# ExecStart=/usr/local/bin/kama_chat_backend  # æ›¿æ¢ä¸ºä½ çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
# Restart=on-failure
# RestartSec=5

# [Install]
# WantedBy=multi-user.target

# æŠŠåç«¯æœåŠ¡èµ·èµ·æ¥
sudo systemctl daemon-reload
sudo systemctl start kama_chat_backend
sudo systemctl enable kama_chat_backend

# è¾“å‡ºå®Œæˆä¿¡æ¯
echo "Deployment complete!"
```


åœ¨Ubuntu22.04äº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œè¯¥è„šæœ¬ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨éƒ¨ç½²ç›¸å…³çš„ä¾èµ–ï¼Œå¹¶æŠŠgoåç«¯å’Œvueå‰ç«¯éƒ¨ç½²åˆ°å¯¹åº”çš„ä½ç½®ï¼Œä¹‹åçš„è®¿é—®å¯ä»¥é€šè¿‡https://xxxxx:443å»è®¿é—®ã€‚å¦‚æœåœ¨å‰ç«¯è®¿é—®åç«¯çš„æ—¶å€™æŠ¥é”™â€œNetWork errorâ€æ—¶ï¼Œå¯èƒ½åç«¯è¿˜æ²¡éƒ¨ç½²å¥½ï¼Œå¯ä»¥é‡å¯ä¸€ä¸‹ã€‚

# é¡¹ç›®ç»“æ„è¯¦è§£

## åç«¯é¡¹ç›®ç»“æ„

KamaChat åç«¯é‡‡ç”¨æ ‡å‡†çš„ Go é¡¹ç›®åˆ†å±‚æ¶æ„ï¼Œéµå¾ª MVC è®¾è®¡æ¨¡å¼å’Œä¾èµ–æ³¨å…¥åŸåˆ™ã€‚

```
KamaChat/
â”œâ”€â”€ api/                                    # API æ¥å£å±‚ï¼ˆController å±‚ï¼‰
â”‚   â””â”€â”€ v1/                                 # API v1 ç‰ˆæœ¬
â”‚       â”œâ”€â”€ controller.go                   # å…¬å…±å“åº”å¤„ç†å‡½æ•°
â”‚       â”œâ”€â”€ chatroom_controller.go          # èŠå¤©å®¤ç›¸å…³æ¥å£ï¼ˆåœ¨çº¿ç”¨æˆ·æŸ¥è¯¢ï¼‰
â”‚       â”œâ”€â”€ group_info_controller.go        # ç¾¤ç»„ç®¡ç†æ¥å£ï¼ˆåˆ›å»ºã€è§£æ•£ã€æ›´æ–°ç¾¤ç»„ç­‰ï¼‰
â”‚       â”œâ”€â”€ message_controller.go           # æ¶ˆæ¯ç›¸å…³æ¥å£ï¼ˆè·å–æ¶ˆæ¯åˆ—è¡¨ã€æ–‡ä»¶ä¸Šä¼ ç­‰ï¼‰
â”‚       â”œâ”€â”€ session_controller.go           # ä¼šè¯ç®¡ç†æ¥å£ï¼ˆæ‰“å¼€ã€åˆ é™¤ä¼šè¯ç­‰ï¼‰
â”‚       â”œâ”€â”€ user_contact_controller.go      # è”ç³»äººç®¡ç†æ¥å£ï¼ˆæ·»åŠ ã€åˆ é™¤ã€æ‹‰é»‘è”ç³»äººç­‰ï¼‰
â”‚       â”œâ”€â”€ user_info_controller.go         # ç”¨æˆ·ä¿¡æ¯æ¥å£ï¼ˆç™»å½•ã€æ³¨å†Œã€æ›´æ–°ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰
â”‚       â””â”€â”€ ws_controller.go                # WebSocket è¿æ¥å¤„ç†
â”‚
â”œâ”€â”€ cmd/                                    # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â””â”€â”€ kama_chat_server/
â”‚       â”œâ”€â”€ main.go                         # ä¸»ç¨‹åºå…¥å£ï¼Œåˆå§‹åŒ–æœåŠ¡å¹¶å¯åŠ¨
â”‚       â”œâ”€â”€ kama_chat_backend               # ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶
â”‚       â””â”€â”€ logs/                           # æ—¥å¿—æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ internal/                               # å†…éƒ¨ç§æœ‰ä»£ç ï¼ˆä¸å¯è¢«å¤–éƒ¨å¯¼å…¥ï¼‰
â”‚   â”œâ”€â”€ config/                             # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ config.go                       # é…ç½®æ–‡ä»¶è§£æï¼ˆMySQLã€Redisã€Kafkaç­‰ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ dao/                                # Data Access Objectï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰
â”‚   â”‚   â””â”€â”€ gorm.go                         # GORM æ•°æ®åº“è¿æ¥åˆå§‹åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ dto/                                # Data Transfer Objectï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ request/                        # è¯·æ±‚å‚æ•°ç»“æ„ä½“ï¼ˆ30+ ä¸ªï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ login_request.go            # ç™»å½•è¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ register_request.go         # æ³¨å†Œè¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ create_group_request.go     # åˆ›å»ºç¾¤ç»„è¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ chat_message_request.go     # èŠå¤©æ¶ˆæ¯è¯·æ±‚
â”‚   â”‚   â”‚   â””â”€â”€ ......                      # å…¶ä»–ä¸šåŠ¡è¯·æ±‚ç»“æ„ä½“
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ respond/                        # å“åº”æ•°æ®ç»“æ„ä½“ï¼ˆ20+ ä¸ªï¼‰
â”‚   â”‚       â”œâ”€â”€ login_respond.go            # ç™»å½•å“åº”
â”‚   â”‚       â”œâ”€â”€ get_userinfo_respond.go     # è·å–ç”¨æˆ·ä¿¡æ¯å“åº”
â”‚   â”‚       â”œâ”€â”€ get_message_list_respond.go # è·å–æ¶ˆæ¯åˆ—è¡¨å“åº”
â”‚   â”‚       â””â”€â”€ ......                      # å…¶ä»–ä¸šåŠ¡å“åº”ç»“æ„ä½“
â”‚   â”‚
â”‚   â”œâ”€â”€ https_server/                       # HTTPS æœåŠ¡å™¨é…ç½®
â”‚   â”‚   â””â”€â”€ https_server.go                 # Gin è·¯ç”±åˆå§‹åŒ–ã€CORS é…ç½®ã€è·¯ç”±æ³¨å†Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ model/                              # æ•°æ®æ¨¡å‹å±‚ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ user_info.go                    # ç”¨æˆ·ä¿¡æ¯è¡¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ group_info.go                   # ç¾¤ç»„ä¿¡æ¯è¡¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ message.go                      # æ¶ˆæ¯è¡¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ session.go                      # ä¼šè¯è¡¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user_contact.go                 # ç”¨æˆ·è”ç³»äººè¡¨æ¨¡å‹
â”‚   â”‚   â””â”€â”€ contact_apply.go                # å¥½å‹ç”³è¯·è¡¨æ¨¡å‹
â”‚   â”‚
â”‚   â””â”€â”€ service/                            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚       â”œâ”€â”€ chat/                           # WebSocket èŠå¤©æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ server.go                   # èŠå¤©æœåŠ¡å™¨ï¼ˆç®¡ç†åœ¨çº¿å®¢æˆ·ç«¯ã€æ¶ˆæ¯è½¬å‘ï¼‰
â”‚       â”‚   â”œâ”€â”€ client.go                   # WebSocket å®¢æˆ·ç«¯è¿æ¥å°è£…
â”‚       â”‚   â””â”€â”€ kafka_server.go             # Kafka æ¨¡å¼çš„èŠå¤©æœåŠ¡å™¨
â”‚       â”‚
â”‚       â”œâ”€â”€ gorm/                           # æ•°æ®åº“ä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ user_info_service.go        # ç”¨æˆ·ç›¸å…³ä¸šåŠ¡ï¼ˆç™»å½•ã€æ³¨å†Œã€æŸ¥è¯¢ç­‰ï¼‰
â”‚       â”‚   â”œâ”€â”€ group_info_service.go       # ç¾¤ç»„ç›¸å…³ä¸šåŠ¡
â”‚       â”‚   â”œâ”€â”€ message_service.go          # æ¶ˆæ¯ç›¸å…³ä¸šåŠ¡
â”‚       â”‚   â”œâ”€â”€ session_service.go          # ä¼šè¯ç›¸å…³ä¸šåŠ¡
â”‚       â”‚   â”œâ”€â”€ user_contact_service.go     # è”ç³»äººç›¸å…³ä¸šåŠ¡
â”‚       â”‚   â””â”€â”€ chatroom_service.go         # èŠå¤©å®¤ç›¸å…³ä¸šåŠ¡
â”‚       â”‚
â”‚       â”œâ”€â”€ kafka/                          # Kafka æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡
â”‚       â”‚   â””â”€â”€ kafka_service.go            # Kafka ç”Ÿäº§è€…/æ¶ˆè´¹è€…å®ç°
â”‚       â”‚
â”‚       â”œâ”€â”€ redis/                          # Redis ç¼“å­˜æœåŠ¡
â”‚       â”‚   â””â”€â”€ redis_service.go            # Redis è¿æ¥æ± ã€ç¼“å­˜æ“ä½œ
â”‚       â”‚
â”‚       â”œâ”€â”€ sms/                            # çŸ­ä¿¡éªŒè¯æœåŠ¡
â”‚       â”‚   â””â”€â”€ auth_code_service.go        # é˜¿é‡Œäº‘çŸ­ä¿¡éªŒè¯ç å‘é€
â”‚       â”‚
â”‚       â””â”€â”€ aes/                            # åŠ å¯†æœåŠ¡
â”‚           â””â”€â”€ aes.go                      # AES åŠ å¯†/è§£å¯†å·¥å…·
â”‚
â”œâ”€â”€ pkg/                                    # å…¬å…±å¯å¤ç”¨ä»£ç ï¼ˆå¯è¢«å¤–éƒ¨å¯¼å…¥ï¼‰
â”‚   â”œâ”€â”€ constants/                          # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ constants.go                    # å…¨å±€å¸¸é‡ï¼ˆé€šé“å¤§å°ã€è¶…æ—¶æ—¶é—´ç­‰ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ enum/                               # æšä¸¾ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ contact/                        # è”ç³»äººæšä¸¾
â”‚   â”‚   â”‚   â”œâ”€â”€ contact_status_enum/        # è”ç³»äººçŠ¶æ€ï¼ˆæ­£å¸¸ã€æ‹‰é»‘ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ contact_type_enum/          # è”ç³»äººç±»å‹ï¼ˆç”¨æˆ·ã€ç¾¤ç»„ï¼‰
â”‚   â”‚   â”œâ”€â”€ contact_apply/                  # å¥½å‹ç”³è¯·æšä¸¾
â”‚   â”‚   â”‚   â””â”€â”€ contact_apply_status_enum/  # ç”³è¯·çŠ¶æ€ï¼ˆå¾…å¤„ç†ã€å·²åŒæ„ã€å·²æ‹’ç»ï¼‰
â”‚   â”‚   â”œâ”€â”€ group_info/                     # ç¾¤ç»„æšä¸¾
â”‚   â”‚   â”‚   â”œâ”€â”€ add_mode_enum/              # åŠ ç¾¤æ–¹å¼ï¼ˆéœ€å®¡æ ¸ã€ç›´æ¥åŠ å…¥ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ group_status_enum/          # ç¾¤ç»„çŠ¶æ€ï¼ˆæ­£å¸¸ã€ç¦ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ message/                        # æ¶ˆæ¯æšä¸¾
â”‚   â”‚   â”‚   â”œâ”€â”€ message_status_enum.go      # æ¶ˆæ¯çŠ¶æ€ï¼ˆå·²å‘é€ã€æœªå‘é€ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ message_type_enum.go        # æ¶ˆæ¯ç±»å‹ï¼ˆæ–‡æœ¬ã€æ–‡ä»¶ã€éŸ³è§†é¢‘ï¼‰
â”‚   â”‚   â””â”€â”€ user_info/                      # ç”¨æˆ·æšä¸¾
â”‚   â”‚       â””â”€â”€ user_status_enum.go         # ç”¨æˆ·çŠ¶æ€ï¼ˆæ­£å¸¸ã€ç¦ç”¨ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ssl/                                # SSL/TLS è¯ä¹¦ç®¡ç†
â”‚   â”‚   â””â”€â”€ tls_handler.go                  # HTTPS é‡å®šå‘ä¸­é—´ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ util/                               # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ random/                         # éšæœºæ•°ç”Ÿæˆå·¥å…·
â”‚   â”‚       â””â”€â”€ random_int.go               # UUID ç”Ÿæˆç­‰
â”‚   â”‚
â”‚   â””â”€â”€ zlog/                               # æ—¥å¿—ç®¡ç†
â”‚       â””â”€â”€ logger.go                       # Zap æ—¥å¿—å°è£…
â”‚
â”œâ”€â”€ configs/                                # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ config.toml                         # ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹
â”‚   â””â”€â”€ config_local.toml                   # æœ¬åœ°å¼€å‘é…ç½®ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ static/                                 # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ avatars/                            # ç”¨æˆ·å¤´åƒå­˜å‚¨
â”‚   â””â”€â”€ files/                              # èŠå¤©æ–‡ä»¶å­˜å‚¨
â”‚
â”œâ”€â”€ test/                                   # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ config/                             # é…ç½®æµ‹è¯•
â”‚   â”œâ”€â”€ dao/                                # æ•°æ®åº“æµ‹è¯•
â”‚   â””â”€â”€ zlog/                               # æ—¥å¿—æµ‹è¯•
â”‚
â”œâ”€â”€ docs/                                   # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘.md                          # ä¸šåŠ¡é€»è¾‘è¯¦ç»†è¯´æ˜
â”‚   â””â”€â”€ image/                              # æ–‡æ¡£å›¾ç‰‡
â”‚
â”œâ”€â”€ go.mod                                  # Go æ¨¡å—ä¾èµ–ç®¡ç†
â”œâ”€â”€ go.sum                                  # ä¾èµ–æ ¡éªŒæ–‡ä»¶
â”œâ”€â”€ LICENSE                                 # å¼€æºåè®®
â””â”€â”€ README.md                               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å‰ç«¯é¡¹ç›®ç»“æ„

å‰ç«¯é‡‡ç”¨ Vue3 + Vue Router + Vuex æ¶æ„ï¼Œå®ç° SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ã€‚

```
web/chat-server/
â”œâ”€â”€ src/                                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.js                             # Vue åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ App.vue                             # æ ¹ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                             # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ css/                            # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ chat.css                    # èŠå¤©ç•Œé¢æ ·å¼
â”‚   â”‚   â”œâ”€â”€ img/                            # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”‚   â””â”€â”€ chat_server_background.jpg  # èƒŒæ™¯å›¾
â”‚   â”‚   â””â”€â”€ js/                             # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ random.js                   # éšæœºæ•°ç”Ÿæˆ
â”‚   â”‚       â””â”€â”€ valid.js                    # è¡¨å•éªŒè¯
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                         # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Modal.vue                       # é€šç”¨æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SmallModal.vue                  # å°å‹æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ VideoModal.vue                  # éŸ³è§†é¢‘é€šè¯æ¨¡æ€æ¡†ï¼ˆWebRTCï¼‰
â”‚   â”‚   â”œâ”€â”€ NavigationModal.vue             # å¯¼èˆªæ¨¡æ€æ¡†
â”‚   â”‚   â”œâ”€â”€ ContactListModal.vue            # è”ç³»äººåˆ—è¡¨é€‰æ‹©æ¡†
â”‚   â”‚   â”œâ”€â”€ DeleteGroupModal.vue            # åˆ é™¤ç¾¤ç»„ç¡®è®¤æ¡†ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â”œâ”€â”€ DeleteUserModal.vue             # åˆ é™¤ç”¨æˆ·ç¡®è®¤æ¡†ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â”œâ”€â”€ DisableGroupModal.vue           # ç¦ç”¨ç¾¤ç»„ç¡®è®¤æ¡†ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â”œâ”€â”€ DisableUserModal.vue            # ç¦ç”¨ç”¨æˆ·ç¡®è®¤æ¡†ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â””â”€â”€ SetAdminModal.vue               # è®¾ç½®ç®¡ç†å‘˜ç¡®è®¤æ¡†
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                             # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js                        # Vue Router è·¯ç”±è¡¨é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                              # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.js                        # Vuex å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆç”¨æˆ·ä¿¡æ¯ã€æ¶ˆæ¯ç­‰ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ views/                              # é¡µé¢è§†å›¾
â”‚       â”œâ”€â”€ access/                         # ç™»å½•æ³¨å†Œæ¨¡å—
â”‚       â”‚   â”œâ”€â”€ Login.vue                   # è´¦å·å¯†ç ç™»å½•é¡µé¢
â”‚       â”‚   â”œâ”€â”€ Register.vue                # æ³¨å†Œé¡µé¢
â”‚       â”‚   â””â”€â”€ SmsLogin.vue                # çŸ­ä¿¡éªŒè¯ç ç™»å½•é¡µé¢
â”‚       â”‚
â”‚       â”œâ”€â”€ chat/                           # èŠå¤©æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ contact/                    # è”ç³»äººç›¸å…³
â”‚       â”‚   â”‚   â”œâ”€â”€ ContactList.vue         # è”ç³»äººåˆ—è¡¨ï¼ˆæ˜¾ç¤ºå¥½å‹ã€ç¾¤ç»„ã€ç”³è¯·ï¼‰
â”‚       â”‚   â”‚   â””â”€â”€ ContactChat.vue         # èŠå¤©ç•Œé¢ï¼ˆæ¶ˆæ¯åˆ—è¡¨ã€è¾“å…¥æ¡†ã€WebRTCï¼‰
â”‚       â”‚   â”œâ”€â”€ session/                    # ä¼šè¯ç›¸å…³
â”‚       â”‚   â”‚   â””â”€â”€ SessionList.vue         # ä¼šè¯åˆ—è¡¨ï¼ˆæœ€è¿‘èŠå¤©ï¼‰
â”‚       â”‚   â””â”€â”€ user/                       # ç”¨æˆ·ç›¸å…³
â”‚       â”‚       â””â”€â”€ OwnInfo.vue             # ä¸ªäººä¿¡æ¯è®¾ç½®é¡µé¢
â”‚       â”‚
â”‚       â””â”€â”€ manager/                        # ç®¡ç†å‘˜æ¨¡å—
â”‚           â””â”€â”€ Manager.vue                 # åå°ç®¡ç†é¡µé¢ï¼ˆç”¨æˆ·/ç¾¤ç»„ç®¡ç†ï¼‰
â”‚
â”œâ”€â”€ public/                                 # å…¬å…±é™æ€èµ„æº
â”‚   â””â”€â”€ index.html                          # HTML æ¨¡æ¿
â”‚
â”œâ”€â”€ babel.config.js                         # Babel é…ç½®
â”œâ”€â”€ jsconfig.json                           # JavaScript é¡¹ç›®é…ç½®
â”œâ”€â”€ vue.config.js                           # Vue CLI é…ç½®ï¼ˆä»£ç†ã€æ‰“åŒ…ç­‰ï¼‰
â”œâ”€â”€ package.json                            # npm ä¾èµ–ç®¡ç†
â”œâ”€â”€ yarn.lock                               # Yarn é”å®šæ–‡ä»¶
â”œâ”€â”€ LICENSE                                 # å¼€æºåè®®
â””â”€â”€ README.md                               # å‰ç«¯è¯´æ˜æ–‡æ¡£
```

---

## æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡

é¡¹ç›®å…±æœ‰ **6 å¼ æ ¸å¿ƒæ•°æ®è¡¨**ï¼Œé‡‡ç”¨ GORM è‡ªåŠ¨è¿ç§»ç”Ÿæˆã€‚

### 1. user_infoï¼ˆç”¨æˆ·ä¿¡æ¯è¡¨ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | è‡ªå¢ä¸»é”® |
| uuid | VARCHAR(20) | ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼ˆU + æ—¶é—´æˆ³ + éšæœºæ•°ï¼‰|
| nickname | VARCHAR(20) | ç”¨æˆ·æ˜µç§° |
| telephone | CHAR(11) | æ‰‹æœºå·ï¼ˆç´¢å¼•ï¼‰|
| email | CHAR(30) | é‚®ç®± |
| avatar | VARCHAR(255) | å¤´åƒ URL |
| gender | TINYINT | æ€§åˆ«ï¼ˆ0:ç”·, 1:å¥³ï¼‰|
| signature | VARCHAR(100) | ä¸ªæ€§ç­¾å |
| password | CHAR(18) | å¯†ç ï¼ˆAES åŠ å¯†ï¼‰|
| birthday | CHAR(8) | ç”Ÿæ—¥ |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |
| deleted_at | DATETIME | è½¯åˆ é™¤æ—¶é—´ |
| last_online_at | DATETIME | æœ€ååœ¨çº¿æ—¶é—´ |
| last_offline_at | DATETIME | æœ€åç¦»çº¿æ—¶é—´ |
| is_admin | TINYINT | æ˜¯å¦ç®¡ç†å‘˜ï¼ˆ0:å¦, 1:æ˜¯ï¼‰|
| status | TINYINT | çŠ¶æ€ï¼ˆ0:æ­£å¸¸, 1:ç¦ç”¨ï¼‰|

**ç´¢å¼•ï¼š**
- å”¯ä¸€ç´¢å¼•ï¼š`uuid`
- æ™®é€šç´¢å¼•ï¼š`telephone`ã€`created_at`ã€`status`

---

### 2. group_infoï¼ˆç¾¤ç»„ä¿¡æ¯è¡¨ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | è‡ªå¢ä¸»é”® |
| uuid | VARCHAR(20) | ç¾¤ç»„å”¯ä¸€æ ‡è¯†ï¼ˆG + æ—¶é—´æˆ³ + éšæœºæ•°ï¼‰|
| group_name | VARCHAR(50) | ç¾¤ç»„åç§° |
| notice | VARCHAR(255) | ç¾¤å…¬å‘Š |
| owner_id | VARCHAR(20) | ç¾¤ä¸» UUID |
| avatar | VARCHAR(255) | ç¾¤å¤´åƒ URL |
| members | JSON | æˆå‘˜ UUID åˆ—è¡¨ï¼ˆJSON æ•°ç»„ï¼‰|
| add_mode | TINYINT | åŠ ç¾¤æ–¹å¼ï¼ˆ0:ç›´æ¥åŠ å…¥, 1:éœ€å®¡æ ¸ï¼‰|
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |
| status | TINYINT | çŠ¶æ€ï¼ˆ0:æ­£å¸¸, 1:ç¦ç”¨ï¼‰|

**JSON å­—æ®µç¤ºä¾‹ï¼š**
```json
members: ["U1234567890", "U0987654321", "U1111111111"]
```

---

### 3. user_contactï¼ˆç”¨æˆ·è”ç³»äººå…³ç³»è¡¨ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | è‡ªå¢ä¸»é”® |
| user_id | VARCHAR(20) | ç”¨æˆ· UUID |
| contact_id | VARCHAR(20) | è”ç³»äºº UUIDï¼ˆå¯ä»¥æ˜¯ç”¨æˆ·æˆ–ç¾¤ç»„ï¼‰|
| contact_type | TINYINT | è”ç³»äººç±»å‹ï¼ˆ0:ç”¨æˆ·, 1:ç¾¤ç»„ï¼‰|
| status | TINYINT | çŠ¶æ€ï¼ˆ0:æ­£å¸¸, 1:å·²æ‹‰é»‘ï¼‰|
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

**è”åˆç´¢å¼•ï¼š** (`user_id`, `contact_id`)

---

### 4. contact_applyï¼ˆå¥½å‹ç”³è¯·è¡¨ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | è‡ªå¢ä¸»é”® |
| apply_user_id | VARCHAR(20) | ç”³è¯·äºº UUID |
| receive_user_id | VARCHAR(20) | æ¥æ”¶äºº UUID |
| contact_type | TINYINT | è”ç³»äººç±»å‹ï¼ˆ0:ç”¨æˆ·, 1:ç¾¤ç»„ï¼‰|
| contact_id | VARCHAR(20) | ç›®æ ‡è”ç³»äºº UUID |
| apply_info | VARCHAR(255) | ç”³è¯·è¯´æ˜ |
| status | TINYINT | çŠ¶æ€ï¼ˆ0:å¾…å¤„ç†, 1:å·²åŒæ„, 2:å·²æ‹’ç», 3:å·²æ‹‰é»‘ï¼‰|
| last_apply_time | DATETIME | æœ€åç”³è¯·æ—¶é—´ |

---

### 5. sessionï¼ˆä¼šè¯è¡¨ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | è‡ªå¢ä¸»é”® |
| uuid | VARCHAR(20) | ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆS + æ—¶é—´æˆ³ + éšæœºæ•°ï¼‰|
| user_id | VARCHAR(20) | ç”¨æˆ· UUID |
| contact_id | VARCHAR(20) | è”ç³»äºº UUID |
| contact_type | TINYINT | è”ç³»äººç±»å‹ï¼ˆ0:ç”¨æˆ·, 1:ç¾¤ç»„ï¼‰|
| last_message | TEXT | æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹ |
| last_message_type | TINYINT | æœ€åæ¶ˆæ¯ç±»å‹ï¼ˆ0:æ–‡æœ¬, 1:æ–‡ä»¶, 2:éŸ³è§†é¢‘ï¼‰|
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ›´æ–°æ—¶é—´ |

**ä½œç”¨ï¼š** ç±»ä¼¼å¾®ä¿¡é¦–é¡µçš„ä¼šè¯åˆ—è¡¨ï¼Œè®°å½•ç”¨æˆ·çš„èŠå¤©ä¼šè¯ã€‚

---

### 6. messageï¼ˆæ¶ˆæ¯è¡¨ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | è‡ªå¢ä¸»é”® |
| uuid | VARCHAR(20) | æ¶ˆæ¯å”¯ä¸€æ ‡è¯†ï¼ˆM + æ—¶é—´æˆ³ + éšæœºæ•°ï¼‰|
| session_id | VARCHAR(20) | æ‰€å±ä¼šè¯ UUID |
| type | TINYINT | æ¶ˆæ¯ç±»å‹ï¼ˆ0:æ–‡æœ¬, 1:æ–‡ä»¶, 2:éŸ³è§†é¢‘ï¼‰|
| content | TEXT | æ–‡æœ¬æ¶ˆæ¯å†…å®¹ |
| url | VARCHAR(255) | æ–‡ä»¶/å›¾ç‰‡ URL |
| send_id | VARCHAR(20) | å‘é€è€… UUID |
| send_name | VARCHAR(50) | å‘é€è€…æ˜µç§° |
| send_avatar | VARCHAR(255) | å‘é€è€…å¤´åƒ |
| receive_id | VARCHAR(20) | æ¥æ”¶è€… UUIDï¼ˆç”¨æˆ·æˆ–ç¾¤ç»„ï¼‰|
| file_size | VARCHAR(20) | æ–‡ä»¶å¤§å° |
| file_type | VARCHAR(50) | æ–‡ä»¶ç±»å‹ |
| file_name | VARCHAR(255) | æ–‡ä»¶å |
| status | TINYINT | çŠ¶æ€ï¼ˆ0:æœªå‘é€, 1:å·²å‘é€ï¼‰|
| av_data | TEXT | éŸ³è§†é¢‘é€šè¯æ•°æ®ï¼ˆWebRTC SDP/ICEï¼‰|
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

**ç´¢å¼•ï¼š** `session_id`ã€`send_id`ã€`receive_id`

---

### è¡¨å…³ç³»å›¾
```
user_info (ç”¨æˆ·)
    â”œâ”€â”€ 1:N â†’ user_contact (è”ç³»äººå…³ç³»)
    â”œâ”€â”€ 1:N â†’ contact_apply (å¥½å‹ç”³è¯·)
    â”œâ”€â”€ 1:N â†’ session (ä¼šè¯)
    â”œâ”€â”€ 1:N â†’ message (å‘é€çš„æ¶ˆæ¯)
    â””â”€â”€ 1:N â†’ group_info (åˆ›å»ºçš„ç¾¤ç»„)

group_info (ç¾¤ç»„)
    â”œâ”€â”€ 1:N â†’ user_contact (ç¾¤æˆå‘˜å…³ç³»)
    â”œâ”€â”€ 1:N â†’ session (ç¾¤ä¼šè¯)
    â””â”€â”€ 1:N â†’ message (ç¾¤æ¶ˆæ¯)

session (ä¼šè¯)
    â””â”€â”€ 1:N â†’ message (ä¼šè¯ä¸­çš„æ¶ˆæ¯)
```

---

# æ ¸å¿ƒæŠ€æœ¯æ¶æ„

## åç«¯æ¶æ„è®¾è®¡

### 1. åˆ†å±‚æ¶æ„
- **API å±‚ï¼ˆControllerï¼‰**ï¼šå¤„ç† HTTP è¯·æ±‚ï¼Œå‚æ•°éªŒè¯ï¼Œè°ƒç”¨ Service å±‚
- **Service å±‚**ï¼šä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œåè°ƒå¤šä¸ª DAO æ“ä½œ
- **DAO å±‚**ï¼šæ•°æ®è®¿é—®å±‚ï¼Œå°è£…æ•°æ®åº“æ“ä½œ
- **Model å±‚**ï¼šæ•°æ®æ¨¡å‹å®šä¹‰ï¼Œå¯¹åº”æ•°æ®åº“è¡¨ç»“æ„

### 2. æ ¸å¿ƒæŠ€æœ¯é€‰å‹
- **Web æ¡†æ¶**ï¼šGinï¼ˆé«˜æ€§èƒ½ HTTP æ¡†æ¶ï¼‰
- **ORM**ï¼šGORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œç®€åŒ–æ•°æ®åº“æ“ä½œï¼‰
- **ç¼“å­˜**ï¼šRedisï¼ˆå­˜å‚¨ä¼šè¯ã€æ¶ˆæ¯ç¼“å­˜ï¼Œæå‡æ€§èƒ½ï¼‰
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šKafkaï¼ˆå¯é€‰ï¼Œå¤„ç†é«˜å¹¶å‘æ¶ˆæ¯ï¼‰
- **å®æ—¶é€šä¿¡**ï¼šWebSocketï¼ˆåŒå‘é€šä¿¡ï¼Œæ¶ˆæ¯å®æ—¶æ¨é€ï¼‰
- **éŸ³è§†é¢‘**ï¼šWebRTCï¼ˆP2P éŸ³è§†é¢‘é€šè¯ï¼‰
- **æ—¥å¿—**ï¼šZapï¼ˆé«˜æ€§èƒ½ç»“æ„åŒ–æ—¥å¿—ï¼‰
- **åŠ å¯†**ï¼šAESï¼ˆå¯†ç åŠ å¯†ï¼‰ã€SSL/TLSï¼ˆHTTPSï¼‰

### 3. WebSocket èŠå¤©æœåŠ¡æ¶æ„
```
å®¢æˆ·ç«¯ WebSocket è¿æ¥
        â†“
   WS Controller
        â†“
   Chat Server (ç®¡ç†æ‰€æœ‰åœ¨çº¿å®¢æˆ·ç«¯)
   â”œâ”€â”€ Login Channel    (ç™»å½•é€šé“)
   â”œâ”€â”€ Logout Channel   (ç™»å‡ºé€šé“)
   â””â”€â”€ Transmit Channel (æ¶ˆæ¯è½¬å‘é€šé“)
        â†“
   æ¶ˆæ¯åˆ†å‘é€»è¾‘
   â”œâ”€â”€ å•èŠï¼šå‘é€ç»™æŒ‡å®šç”¨æˆ·
   â”œâ”€â”€ ç¾¤èŠï¼šå‘é€ç»™ç¾¤ç»„æ‰€æœ‰æˆå‘˜
   â””â”€â”€ ç¦»çº¿æ¶ˆæ¯å­˜å‚¨åˆ° MySQL
```

### 4. æ¶ˆæ¯æµç¨‹
1. ç”¨æˆ· A å‘é€æ¶ˆæ¯ â†’ WebSocket å‘é€åˆ°æœåŠ¡å™¨
2. æœåŠ¡å™¨æ¥æ”¶æ¶ˆæ¯ â†’ å­˜å‚¨åˆ° MySQLï¼ˆæŒä¹…åŒ–ï¼‰
3. åˆ¤æ–­æ¥æ”¶è€…æ˜¯å¦åœ¨çº¿ï¼š
   - **åœ¨çº¿**ï¼šé€šè¿‡ WebSocket æ¨é€ç»™ç”¨æˆ· B
   - **ç¦»çº¿**ï¼šæ¶ˆæ¯å·²å­˜å‚¨ï¼Œç”¨æˆ· B ç™»å½•æ—¶è‡ªåŠ¨æ‹‰å–
4. ä½¿ç”¨ Redis ç¼“å­˜æœ€è¿‘æ¶ˆæ¯åˆ—è¡¨ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢

## å‰ç«¯æ¶æ„è®¾è®¡

### 1. Vue3 æ¶æ„
- **ç»„ä»¶åŒ–å¼€å‘**ï¼šå¤ç”¨æ€§å¼ºï¼Œæ˜“äºç»´æŠ¤
- **Vue Router**ï¼šå•é¡µåº”ç”¨è·¯ç”±ç®¡ç†
- **Vuex**ï¼šå…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆç”¨æˆ·ä¿¡æ¯ã€æ¶ˆæ¯åˆ—è¡¨ç­‰ï¼‰
- **WebSocket**ï¼šä¸åç«¯å»ºç«‹é•¿è¿æ¥ï¼Œæ¥æ”¶å®æ—¶æ¶ˆæ¯
- **WebRTC**ï¼šéŸ³è§†é¢‘é€šè¯ï¼ˆP2P + TURN æœåŠ¡å™¨ä¸­ç»§ï¼‰

### 2. æ ¸å¿ƒé¡µé¢
- **ç™»å½•æ³¨å†Œ**ï¼šè´¦å·ç™»å½•ã€çŸ­ä¿¡ç™»å½•ã€æ³¨å†Œ
- **ä¼šè¯åˆ—è¡¨**ï¼šæ˜¾ç¤ºæœ€è¿‘èŠå¤©ï¼Œç±»ä¼¼å¾®ä¿¡é¦–é¡µ
- **è”ç³»äººç®¡ç†**ï¼šå¥½å‹åˆ—è¡¨ã€ç¾¤ç»„åˆ—è¡¨ã€å¥½å‹ç”³è¯·
- **èŠå¤©ç•Œé¢**ï¼šæ¶ˆæ¯æ”¶å‘ã€æ–‡ä»¶ä¸Šä¼ ã€éŸ³è§†é¢‘é€šè¯
- **ä¸ªäººä¸­å¿ƒ**ï¼šä¿®æ”¹å¤´åƒã€æ˜µç§°ã€ç­¾åç­‰
- **åå°ç®¡ç†**ï¼šç®¡ç†å‘˜ç®¡ç†ç”¨æˆ·å’Œç¾¤ç»„ï¼ˆç¦ç”¨ã€åˆ é™¤ç­‰ï¼‰

# é¡¹ç›®å­¦ä¹ è·¯çº¿

## é€‚åˆäººç¾¤
- Go åç«¯å¼€å‘å­¦ä¹ è€…
- Vue å‰ç«¯å¼€å‘å­¦ä¹ è€…
- æƒ³äº†è§£å³æ—¶é€šè®¯ç³»ç»Ÿå®ç°åŸç†çš„å¼€å‘è€…
- éœ€è¦æ¯•è®¾/è¯¾è®¾é¡¹ç›®å‚è€ƒçš„å­¦ç”Ÿ

## å­¦ä¹ é¡ºåº

### é˜¶æ®µä¸€ï¼šç¯å¢ƒå‡†å¤‡ä¸åŸºç¡€çŸ¥è¯†ï¼ˆ1-2å¤©ï¼‰

#### 1. æŠ€æœ¯æ ˆé¢„ä¹ 
**åç«¯å¿…å¤‡çŸ¥è¯†ï¼š**
- Go åŸºç¡€è¯­æ³•ï¼ˆå˜é‡ã€å‡½æ•°ã€ç»“æ„ä½“ã€æ¥å£ã€åç¨‹ã€é€šé“ï¼‰
- Gin æ¡†æ¶åŸºç¡€ï¼ˆè·¯ç”±ã€ä¸­é—´ä»¶ã€å‚æ•°ç»‘å®šï¼‰
- GORM ä½¿ç”¨ï¼ˆæ¨¡å‹å®šä¹‰ã€CRUDã€å…³è”æŸ¥è¯¢ï¼‰
- MySQL æ•°æ®åº“åŸºç¡€
- Redis åŸºç¡€æ“ä½œ
- WebSocket åŸç†

**å‰ç«¯å¿…å¤‡çŸ¥è¯†ï¼š**
- Vue3 åŸºç¡€ï¼ˆç»„åˆå¼ APIã€å“åº”å¼åŸç†ï¼‰
- Vue Router è·¯ç”±ç®¡ç†
- Vuex çŠ¶æ€ç®¡ç†
- WebSocket å®¢æˆ·ç«¯ä½¿ç”¨
- WebRTC åŸºç¡€ï¼ˆå¯åæœŸå­¦ä¹ ï¼‰

#### 2. ç¯å¢ƒæ­å»º
```bash
# 1. å®‰è£…å¿…è¦è½¯ä»¶
- Go 1.20+
- Node.js 16+
- MySQL 8.0+
- Redis 6.0+
- Git

# 2. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd KamaChat

# 3. åç«¯é…ç½®
cp configs/config.toml configs/config_local.toml
# ä¿®æ”¹ config_local.toml ä¸­çš„æ•°æ®åº“ã€Redis é…ç½®

# 4. å®‰è£…åç«¯ä¾èµ–
go mod tidy

# 5. åˆ›å»ºæ•°æ®åº“
mysql -u root -p
CREATE DATABASE kama_chat_server;

# 6. å‰ç«¯é…ç½®
cd web/chat-server
yarn install
```

---

### é˜¶æ®µäºŒï¼šæ•°æ®åº“è®¾è®¡ä¸æ¨¡å‹å±‚ï¼ˆ2-3å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
ç†è§£æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ŒæŒæ¡ GORM æ¨¡å‹å®šä¹‰å’Œå…³ç³»æ˜ å°„ã€‚

#### å­¦ä¹ è·¯å¾„
1. **é˜…è¯»æ•°æ®åº“è®¾è®¡**
   - æŸ¥çœ‹ `internal/model/` ä¸‹çš„æ‰€æœ‰æ¨¡å‹æ–‡ä»¶
   - ç†è§£ 6 å¼ æ ¸å¿ƒè¡¨çš„ä½œç”¨ï¼š
     - `user_info`ï¼šç”¨æˆ·ä¿¡æ¯è¡¨
     - `group_info`ï¼šç¾¤ç»„ä¿¡æ¯è¡¨
     - `user_contact`ï¼šç”¨æˆ·è”ç³»äººå…³ç³»è¡¨
     - `contact_apply`ï¼šå¥½å‹ç”³è¯·è¡¨
     - `message`ï¼šæ¶ˆæ¯è¡¨
     - `session`ï¼šä¼šè¯è¡¨

2. **é‡ç‚¹æ–‡ä»¶**
   ```
   internal/model/user_info.go      # ç”¨æˆ·è¡¨ï¼ˆç†è§£è½¯åˆ é™¤ã€ç´¢å¼•ï¼‰
   internal/model/message.go        # æ¶ˆæ¯è¡¨ï¼ˆç†è§£æ¶ˆæ¯ç±»å‹ï¼‰
   internal/model/group_info.go     # ç¾¤ç»„è¡¨ï¼ˆç†è§£ JSON å­—æ®µå­˜å‚¨æˆå‘˜ï¼‰
   ```

3. **å®è·µä»»åŠ¡**
   - å¯åŠ¨é¡¹ç›®ï¼Œè§‚å¯Ÿ GORM è‡ªåŠ¨å»ºè¡¨
   - å°è¯•æ‰‹åŠ¨æ’å…¥æµ‹è¯•æ•°æ®
   - ç†è§£ GORM æ ‡ç­¾å«ä¹‰ï¼ˆ`gorm:"column:xxx;index;not null"`ï¼‰

---

### é˜¶æ®µä¸‰ï¼šé…ç½®ä¸å·¥å…·å±‚ï¼ˆ1å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
ç†è§£é¡¹ç›®é…ç½®ç®¡ç†ã€æ—¥å¿—ç³»ç»Ÿã€å¸¸é‡å®šä¹‰ã€‚

#### å­¦ä¹ è·¯å¾„
1. **é…ç½®ç®¡ç†**
   ```
   internal/config/config.go        # é…ç½®æ–‡ä»¶è§£æ
   configs/config_local.toml        # é…ç½®æ–‡ä»¶
   ```

2. **æ—¥å¿—ç³»ç»Ÿ**
   ```
   pkg/zlog/logger.go               # Zap æ—¥å¿—å°è£…
   ```

3. **å¸¸é‡ä¸æšä¸¾**
   ```
   pkg/constants/constants.go       # å…¨å±€å¸¸é‡
   pkg/enum/                        # å„ç§æšä¸¾å®šä¹‰
   ```

4. **å·¥å…·å‡½æ•°**
   ```
   pkg/util/random/                 # UUID ç”Ÿæˆ
   internal/service/aes/aes.go      # AES åŠ å¯†
   ```

---

### é˜¶æ®µå››ï¼šç”¨æˆ·æ¨¡å—ï¼ˆ3-4å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
æŒæ¡å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†æµç¨‹ã€‚

#### å­¦ä¹ è·¯å¾„

**1. æ³¨å†Œæµç¨‹**
```
å‰ç«¯ï¼šviews/access/Register.vue
  â†“ å‘é€æ³¨å†Œè¯·æ±‚
åç«¯ï¼šapi/v1/user_info_controller.go â†’ Register()
  â†“ è°ƒç”¨
åç«¯ï¼šinternal/service/gorm/user_info_service.go â†’ RegisterUser()
  â†“ å­˜å‚¨
æ•°æ®åº“ï¼šuser_info è¡¨
```

**é‡ç‚¹ä»£ç ï¼š**
- `api/v1/user_info_controller.go` â†’ `Register()` å‡½æ•°
- `internal/service/gorm/user_info_service.go` â†’ `RegisterUser()` å‡½æ•°
- ç†è§£å¯†ç åŠ å¯†ã€UUID ç”Ÿæˆã€å‚æ•°æ ¡éªŒ

**2. ç™»å½•æµç¨‹**
```
å‰ç«¯ï¼šviews/access/Login.vue
  â†“ å‘é€ç™»å½•è¯·æ±‚
åç«¯ï¼šapi/v1/user_info_controller.go â†’ Login()
  â†“ éªŒè¯å¯†ç 
åç«¯ï¼šinternal/service/gorm/user_info_service.go â†’ Login()
  â†“ è¿”å›ç”¨æˆ·ä¿¡æ¯
å‰ç«¯ï¼šå­˜å‚¨åˆ° Vuexï¼Œå»ºç«‹ WebSocket è¿æ¥
```

**é‡ç‚¹ä»£ç ï¼š**
- `api/v1/user_info_controller.go` â†’ `Login()` å‡½æ•°
- ç†è§£å¯†ç éªŒè¯ã€è¿”å› Tokenï¼ˆå¦‚æœæœ‰ï¼‰

**3. çŸ­ä¿¡ç™»å½•**
```
åç«¯ï¼šinternal/service/sms/auth_code_service.go  # é˜¿é‡Œäº‘çŸ­ä¿¡
api/v1/user_info_controller.go â†’ SendSmsCode()ã€SmsLogin()
```

**4. ç”¨æˆ·ä¿¡æ¯ç®¡ç†**
- ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼š`UpdateUserInfo()`
- ä¸Šä¼ å¤´åƒï¼š`api/v1/message_controller.go â†’ UploadAvatar()`

**å®è·µä»»åŠ¡ï¼š**
- æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·
- ä½¿ç”¨è´¦å·å¯†ç ç™»å½•
- ä¿®æ”¹ç”¨æˆ·æ˜µç§°ã€å¤´åƒ

---

### é˜¶æ®µäº”ï¼šWebSocket ä¸å®æ—¶é€šä¿¡ï¼ˆ4-5å¤©ï¼Œæ ¸å¿ƒï¼‰

#### å­¦ä¹ ç›®æ ‡
ç†è§£ WebSocket è¿æ¥ç®¡ç†ã€æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€åœ¨çº¿çŠ¶æ€ç®¡ç†ã€‚

#### å­¦ä¹ è·¯å¾„

**1. WebSocket è¿æ¥å»ºç«‹**
```
å‰ç«¯ï¼šsrc/views/chat/contact/ContactChat.vue
  â†“ å»ºç«‹ WebSocket è¿æ¥
åç«¯ï¼šapi/v1/ws_controller.go â†’ WsLogin()
  â†“ å‡çº§ HTTP ä¸º WebSocket
åç«¯ï¼šinternal/service/chat/client.go â†’ Client ç»“æ„ä½“
  â†“ æ³¨å†Œåˆ°èŠå¤©æœåŠ¡å™¨
åç«¯ï¼šinternal/service/chat/server.go â†’ Login Channel
```

**é‡ç‚¹ä»£ç ï¼š**
```go
// api/v1/ws_controller.go
func WsLogin(c *gin.Context) {
    // 1. å‡çº§ä¸º WebSocket è¿æ¥
    conn, _ := upgrader.Upgrade(c.Writer, c.Request, nil)
    
    // 2. åˆ›å»º Client å¯¹è±¡
    client := &chat.Client{
        Uuid: uuid,
        Conn: conn,
        SendBack: make(chan *chat.MessageBack),
    }
    
    // 3. æ³¨å†Œåˆ° ChatServer
    chat.ChatServer.SendClientToLogin(client)
    
    // 4. å¯åŠ¨æ¥æ”¶å’Œå‘é€åç¨‹
    go client.Read()
    go client.Write()
}
```

**2. èŠå¤©æœåŠ¡å™¨æ¶æ„**
```
internal/service/chat/server.go      # æ ¸å¿ƒï¼šServer ç»“æ„ä½“
internal/service/chat/client.go      # å®¢æˆ·ç«¯è¿æ¥å°è£…
```

**Server ç»“æ„ä½“è§£æï¼š**
```go
type Server struct {
    Clients  map[string]*Client  // æ‰€æœ‰åœ¨çº¿å®¢æˆ·ç«¯ï¼ˆkey: uuidï¼‰
    mutex    *sync.Mutex         // å¹¶å‘å®‰å…¨é”
    Transmit chan []byte         // æ¶ˆæ¯è½¬å‘é€šé“
    Login    chan *Client        // ç™»å½•é€šé“
    Logout   chan *Client        // ç™»å‡ºé€šé“
}
```

**3. æ¶ˆæ¯æ”¶å‘æµç¨‹**

**å‘é€æ¶ˆæ¯ï¼š**
```
å‰ç«¯ï¼šç”¨æˆ·è¾“å…¥æ¶ˆæ¯ï¼Œç‚¹å‡»å‘é€
  â†“ WebSocket.send(JSON.stringify(message))
åç«¯ï¼šClient.Read() æ¥æ”¶æ¶ˆæ¯
  â†“ å‘é€åˆ° Transmit Channel
åç«¯ï¼šServer.Start() å¤„ç† Transmit Channel
  â†“ åˆ¤æ–­æ¥æ”¶è€…ç±»å‹ï¼ˆå•èŠ/ç¾¤èŠï¼‰
  â†“ å­˜å‚¨åˆ° MySQL
  â†“ æŸ¥æ‰¾æ¥æ”¶è€…æ˜¯å¦åœ¨çº¿
  â†“ å¦‚æœåœ¨çº¿ï¼Œå‘é€åˆ°æ¥æ”¶è€…çš„ SendBack Channel
åç«¯ï¼šClient.Write() å‘é€æ¶ˆæ¯
  â†“ WebSocket æ¨é€ç»™å‰ç«¯
å‰ç«¯ï¼šæ¥æ”¶æ¶ˆæ¯ï¼Œæ˜¾ç¤ºåœ¨èŠå¤©ç•Œé¢
```

**4. æ¶ˆæ¯ç±»å‹å¤„ç†**
- æ–‡æœ¬æ¶ˆæ¯ï¼š`message_type_enum.Text`
- æ–‡ä»¶æ¶ˆæ¯ï¼š`message_type_enum.File`
- éŸ³è§†é¢‘æ¶ˆæ¯ï¼š`message_type_enum.AudioOrVideo`

**å®è·µä»»åŠ¡ï¼š**
- æ³¨å†Œä¸¤ä¸ªç”¨æˆ·ï¼Œäº’ç›¸å‘é€æ¶ˆæ¯
- è§‚å¯Ÿåç«¯æ—¥å¿—ï¼Œç†è§£æ¶ˆæ¯æµè½¬è¿‡ç¨‹
- å°è¯•æ–­å¼€ WebSocketï¼Œè§‚å¯Ÿç¦»çº¿æ¶ˆæ¯å¤„ç†

---

### é˜¶æ®µå…­ï¼šè”ç³»äººä¸ä¼šè¯ç®¡ç†ï¼ˆ2-3å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
æŒæ¡å¥½å‹æ·»åŠ ã€ç¾¤ç»„åˆ›å»ºã€ä¼šè¯ç®¡ç†é€»è¾‘ã€‚

#### å­¦ä¹ è·¯å¾„

**1. å¥½å‹ç”³è¯·æµç¨‹**
```
å‰ç«¯ï¼šContactList.vue â†’ æ·»åŠ å¥½å‹
  â†“
åç«¯ï¼šapi/v1/user_contact_controller.go â†’ ApplyContact()
  â†“ å­˜å‚¨åˆ° contact_apply è¡¨
å‰ç«¯ï¼šè¢«ç”³è¯·äººæŸ¥çœ‹å¥½å‹ç”³è¯·
  â†“
åç«¯ï¼šGetNewContactList() æŸ¥è¯¢å¾…å¤„ç†ç”³è¯·
  â†“
å‰ç«¯ï¼šåŒæ„/æ‹’ç»ç”³è¯·
  â†“
åç«¯ï¼šPassContactApply() / RefuseContactApply()
  â†“ åŒæ„åæ’å…¥ user_contact è¡¨
```

**2. ç¾¤ç»„ç®¡ç†**
```
api/v1/group_info_controller.go      # ç¾¤ç»„æ¥å£
internal/service/gorm/group_info_service.go  # ç¾¤ç»„ä¸šåŠ¡é€»è¾‘
```

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- åˆ›å»ºç¾¤ç»„ï¼š`CreateGroup()`
- åŠ å…¥ç¾¤ç»„ï¼š`EnterGroupDirectly()` / `CheckGroupAddMode()`
- é€€å‡ºç¾¤ç»„ï¼š`LeaveGroup()`
- è§£æ•£ç¾¤ç»„ï¼š`DismissGroup()`

**3. ä¼šè¯ç®¡ç†**
```
api/v1/session_controller.go
internal/service/gorm/session_service.go
```

**ä¼šè¯åˆ—è¡¨ï¼š**
- ç”¨æˆ·ä¼šè¯ï¼š`GetUserSessionList()`ï¼ˆç±»ä¼¼å¾®ä¿¡é¦–é¡µï¼‰
- ç¾¤ç»„ä¼šè¯ï¼š`GetGroupSessionList()`

**å®è·µä»»åŠ¡ï¼š**
- åˆ›å»ºä¸€ä¸ªç¾¤ç»„
- é‚€è¯·å¤šä¸ªç”¨æˆ·åŠ å…¥
- åœ¨ç¾¤ç»„ä¸­å‘é€æ¶ˆæ¯
- è§‚å¯Ÿä¼šè¯åˆ—è¡¨æ›´æ–°

---

### é˜¶æ®µä¸ƒï¼šæ¶ˆæ¯ç®¡ç†ä¸æ–‡ä»¶ä¸Šä¼ ï¼ˆ2å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
ç†è§£æ¶ˆæ¯æŒä¹…åŒ–ã€æ¶ˆæ¯åˆ—è¡¨æŸ¥è¯¢ã€æ–‡ä»¶ä¸Šä¼ å¤„ç†ã€‚

#### å­¦ä¹ è·¯å¾„

**1. æ¶ˆæ¯åˆ—è¡¨æŸ¥è¯¢**
```
api/v1/message_controller.go
  â”œâ”€â”€ GetMessageList()        # å•èŠæ¶ˆæ¯åˆ—è¡¨
  â””â”€â”€ GetGroupMessageList()   # ç¾¤èŠæ¶ˆæ¯åˆ—è¡¨
```

**Redis ç¼“å­˜ç­–ç•¥ï¼š**
```go
// ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼šä» MySQL è¯»å–ï¼Œå­˜å…¥ Redis
key: "message_list_{sendId}_{receiveId}"
value: JSON æ ¼å¼çš„æ¶ˆæ¯åˆ—è¡¨
TTL: 30 åˆ†é’Ÿ

// åç»­æŸ¥è¯¢ï¼šç›´æ¥ä» Redis è¯»å–
```

**2. æ–‡ä»¶ä¸Šä¼ **
```
api/v1/message_controller.go
  â”œâ”€â”€ UploadAvatar()  # ä¸Šä¼ å¤´åƒ
  â””â”€â”€ UploadFile()    # ä¸Šä¼ èŠå¤©æ–‡ä»¶
```

**å®è·µä»»åŠ¡ï¼š**
- å‘é€æ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶æ¶ˆæ¯
- æŸ¥çœ‹æ•°æ®åº“ message è¡¨
- æŸ¥çœ‹ Redis ç¼“å­˜

---

### é˜¶æ®µå…«ï¼šéŸ³è§†é¢‘é€šè¯ï¼ˆ3-4å¤©ï¼Œéš¾ç‚¹ï¼‰

#### å­¦ä¹ ç›®æ ‡
ç†è§£ WebRTC P2P é€šä¿¡åŸç†ï¼ŒæŒæ¡ ICEã€SDPã€TURN æœåŠ¡å™¨é…ç½®ã€‚

#### å­¦ä¹ è·¯å¾„

**1. WebRTC åŸºç¡€**
- å­¦ä¹  WebRTC ä¸‰å¤§æ ¸å¿ƒï¼š
  - **ICE**ï¼šç½‘ç»œç©¿é€ï¼ˆNAT æ‰“æ´ï¼‰
  - **SDP**ï¼šä¼šè¯æè¿°åè®®
  - **STUN/TURN**ï¼šä¸­ç»§æœåŠ¡å™¨

**2. å‰ç«¯ WebRTC å®ç°**
```
src/views/chat/contact/ContactChat.vue  # æ ¸å¿ƒä»£ç 
src/components/VideoModal.vue          # éŸ³è§†é¢‘ç•Œé¢
```

**é€šè¯æµç¨‹ï¼š**
```
ç”¨æˆ· Aï¼šç‚¹å‡»"è§†é¢‘é€šè¯"
  â†“ åˆ›å»º RTCPeerConnection
  â†“ å‘é€ offerï¼ˆé€šè¿‡ WebSocketï¼‰
  â†“
åç«¯ï¼šè½¬å‘ offer ç»™ç”¨æˆ· B
  â†“
ç”¨æˆ· Bï¼šæ”¶åˆ°é€šè¯è¯·æ±‚
  â†“ åˆ›å»º RTCPeerConnection
  â†“ å‘é€ answerï¼ˆé€šè¿‡ WebSocketï¼‰
  â†“
ç”¨æˆ· Aï¼šæ”¶åˆ° answer
  â†“
åŒæ–¹äº¤æ¢ ICE Candidate
  â†“
å»ºç«‹ P2P è¿æ¥ï¼Œå¼€å§‹é€šè¯
```

**3. TURN æœåŠ¡å™¨é…ç½®**
```javascript
const ICE_CFG = {
  iceServers: [
    {
      urls: 'turn:your-server-ip:3478',
      username: 'your-username',
      credential: 'your-password'
    }
  ]
};
```

**å®è·µä»»åŠ¡ï¼š**
- æœ¬åœ°æµ‹è¯•ï¼ˆæ— éœ€ TURN æœåŠ¡å™¨ï¼‰
- å…¬ç½‘æµ‹è¯•ï¼ˆéœ€é…ç½® TURN æœåŠ¡å™¨ï¼‰

---

### é˜¶æ®µä¹ï¼šåå°ç®¡ç†ï¼ˆ1-2å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
ç†è§£ç®¡ç†å‘˜æƒé™æ§åˆ¶ã€ç”¨æˆ·ç®¡ç†ã€ç¾¤ç»„ç®¡ç†ã€‚

#### å­¦ä¹ è·¯å¾„

**1. ç®¡ç†å‘˜åˆ¤æ–­**
```go
// åœ¨ Controller ä¸­åˆ¤æ–­
if user.IsAdmin != 1 {
    JsonBack(c, "æƒé™ä¸è¶³", -2, nil)
    return
}
```

**2. ç®¡ç†åŠŸèƒ½**
```
api/v1/user_info_controller.go
  â”œâ”€â”€ DisableUsers()  # ç¦ç”¨ç”¨æˆ·
  â”œâ”€â”€ DeleteUsers()   # åˆ é™¤ç”¨æˆ·
  â””â”€â”€ SetAdmin()      # è®¾ç½®ç®¡ç†å‘˜

api/v1/group_info_controller.go
  â”œâ”€â”€ SetGroupsStatus()  # ç¦ç”¨ç¾¤ç»„
  â””â”€â”€ DeleteGroups()     # åˆ é™¤ç¾¤ç»„
```

**3. å‰ç«¯ç®¡ç†é¡µé¢**
```
src/views/manager/Manager.vue
```

---

### é˜¶æ®µåï¼šé¡¹ç›®éƒ¨ç½²ï¼ˆ2-3å¤©ï¼‰

#### å­¦ä¹ ç›®æ ‡
æŒæ¡ Ubuntu æœåŠ¡å™¨éƒ¨ç½²ã€HTTPS é…ç½®ã€MySQL/Redis éƒ¨ç½²ã€‚

#### å­¦ä¹ è·¯å¾„
1. æŒ‰ç…§ README.md ä¸­çš„éƒ¨ç½²è„šæœ¬æ“ä½œ
2. é…ç½®åŸŸåå’Œ SSL è¯ä¹¦
3. é…ç½® TURN æœåŠ¡å™¨ï¼ˆcoturnï¼‰
4. ä½¿ç”¨ systemd ç®¡ç†åç«¯æœåŠ¡

---

## å­¦ä¹ å»ºè®®

### 1. å¾ªåºæ¸è¿›
- ä¸è¦ä¸€æ¬¡æ€§ç†è§£æ‰€æœ‰ä»£ç 
- ä»å•ä¸ªåŠŸèƒ½æ¨¡å—å…¥æ‰‹ï¼Œè·Ÿè¸ªå®Œæ•´æµç¨‹
- è¾¹å­¦è¾¹å®è·µï¼Œä¿®æ”¹ä»£ç è§‚å¯Ÿæ•ˆæœ

### 2. è°ƒè¯•æŠ€å·§
- åç«¯ï¼šä½¿ç”¨ `zlog.Info()` / `zlog.Debug()` æ‰“å°æ—¥å¿—
- å‰ç«¯ï¼šä½¿ç”¨ `console.log()` æŸ¥çœ‹æ•°æ®æµ
- æ•°æ®åº“ï¼šä½¿ç”¨ MySQL Workbench æŸ¥çœ‹è¡¨æ•°æ®
- Redisï¼šä½¿ç”¨ Redis Desktop Manager æŸ¥çœ‹ç¼“å­˜

### 3. æ‰©å±•ç»ƒä¹ 
- æ·»åŠ è¡¨æƒ…åŒ…åŠŸèƒ½
- å®ç°æ¶ˆæ¯æ’¤å›
- æ·»åŠ ç¾¤ç»„ç®¡ç†å‘˜åŠŸèƒ½
- å®ç°æ¶ˆæ¯å·²è¯»/æœªè¯»çŠ¶æ€
- ä¼˜åŒ–æ¶ˆæ¯åŠ è½½ï¼ˆåˆ†é¡µã€è™šæ‹Ÿæ»šåŠ¨ï¼‰

### 4. å‚è€ƒæ–‡æ¡£
- Gin å®˜æ–¹æ–‡æ¡£ï¼šhttps://gin-gonic.com/
- GORM å®˜æ–¹æ–‡æ¡£ï¼šhttps://gorm.io/
- Vue3 å®˜æ–¹æ–‡æ¡£ï¼šhttps://cn.vuejs.org/
- WebRTC æ•™ç¨‹ï¼šhttps://webrtc.org/

---

# docs

åœ¨ `/docs/ä¸šåŠ¡é€»è¾‘.md` ä¸­ï¼Œä»‹ç»äº†å…·ä½“çš„ä¸šåŠ¡è®¾è®¡ï¼Œå¯¹ä¸šåŠ¡æœ‰é—®é¢˜çš„åŒå­¦å¯ä»¥æŸ¥çœ‹äº†è§£ä¸€ä¸‹ã€‚

# todoList

-  å¤šå¯¹å¤šç¾¤èŠ

-  nginxåˆ†å¸ƒå¼éƒ¨ç½²

  
